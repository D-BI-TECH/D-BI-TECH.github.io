---
layout: post
title:  Power BI ?????? (BYOK?OLS)
date:   2022-02-09 00:03:50 +0000
image:  28.jpg
tags:   [Power BI,Azure Key Vault,Tabular Editor]
author-name: Davis ZHANG
author-image: Davis.jpg
level: ??
---

# ??

??????????,???????,??????????????????????Power BI?????????????,?????BI????????????????????????????,????PBI?M365??????,??Power BI??????????????,?"????,?????????"???????????

# ??PBI?????????

?Power BI??????PBI Service?,?????????Azure Blob Storage, ??????,?????Microsoft??,?????,????????????????????????Microsoft????????256?AES????,?????????????????????????????,?????????????????????????????????????,?Power BI??BYOK(Bring your own Key)????????

## ?PBI??BYOK

> **??:**
> 
>  - BYOK??????PBI Premium (??Capacity?Per User)
>  - BYOK????????????????Import???    (?????????[???](https://docs.microsoft.com/en-us/power-bi/admin/service-encryption-byok#data-source-and-storage-considerations))


1.??Azure??Key Vault, ???Unwrap Key?Wrap Key??

![?????????](https://img-blog.csdnimg.cn/cc3225f7c69346fd8f78f34e2a4e4235.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_RC1CSSB8IERhdmlzIG9uIEJJ,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

2.?Access Policy??????BYOK?Power BI??????????Power BI Service????

![?????????](https://img-blog.csdnimg.cn/6ea985987cf543359da2b1bea7142036.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_RC1CSSB8IERhdmlzIG9uIEJJ,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)


3.????????????

![?????????](https://img-blog.csdnimg.cn/79309571380f43e19421b137c34b8a2c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_RC1CSSB8IERhdmlzIG9uIEJJ,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

4.??,?????????????PBI??,??????????,???PowerShell?????

```sql
--??Cmdlets(????)
Install-Module -Name MicrosoftPowerBIMgmt
--??
Connect-PowerBIServiceAccount 
--???PBI?????BYOK
Add-PowerBIEncryptionKey -Name '<??Key??>' -KeyVaultKeyUri '<??Key URI>'
--?:??Key URI??Azure Key Vault?????
--????ID
Get-PowerBICapacity -Scope Individual
--??,??????BYOK
Set-PowerBICapacityEncryptionKey -CapacityId <????ID> -KeyName '<??Key??>'
```

??,BYOK?????,????????:


```sql
Get-PowerBIEncryptionKey
```

?????????:

![?????????](https://img-blog.csdnimg.cn/fd751b7a7d9a44a5991c526013cee56a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_RC1CSSB8IERhdmlzIG9uIEJJ,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

???????,??BYOK????????????,??Workspace???? ????????BYOK,?????????????????BYOK???

6.????,???????,????????,????????????,?????Azure Key Vault ? "Rotation Policy" ?????

```sql
Switch-PowerBIEncryptionKey -Name '<??Key??>' -KeyVaultKeyUri '<????Key URI>'
```

??????,?????????????,?????????,??????????????????,????,??:

![???????](https://img-blog.csdnimg.cn/1c3f4a5898c24d95a68b50f0694ef9c6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_RC1CSSB8IERhdmlzIG9uIEJJ,size_20,color_FFFFFF,t_70,g_se,x_16)

# ??PBI?????????

?????????,????,???????PBI???,????????????,??????????????????????,????????????????????Viewer??,????????????????????????

????,?Power BI ????? ,?????????????,RLS?OLS, ???PBI????????????,?????????????????DAX??????,?????USERPRINCIPALNAME() ????????(??????,?????); ???OLS (Object Level Security) ??????????????,????????????(?????)?????????,?????????"??????"?

## ?PBI??OLS

?RLS??,OLS?????PBID????,???????????????????????[tabular editor](https://tabulareditor.com)??????????????,?????????????,???????????,?OLS??????????None??,??:

![?????????](https://img-blog.csdnimg.cn/1685a10a0d794ac8b9c1e4c3ff509c7d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_RC1CSSB8IERhdmlzIG9uIEJJ,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

?????OLS??????:

1. ??????????????????????,?????????,???????????????

2. ?????????????OLS,??????????????????,????????????????

????????????????????????"User"???"OrderQty"?OLS????None,?????????????,????????????,???????????????,?????????

![?????????](https://img-blog.csdnimg.cn/782f2bfcd49e4af88fcbb60cdaf1c33c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_RC1CSSB8IERhdmlzIG9uIEJJ,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

?????????,??PBID?????????????,????????????????????????,??,OLS????????????????????

# ??PBI?????????

(???)



-----------------

**????: [??](https://www.zhihu.com/people/zhang-zhe-hong-01/posts)   [Power BI????](https://community.powerbi.com/t5/user/viewprofilepage/user-id/220984)**
